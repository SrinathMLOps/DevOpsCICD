# Architecture Diagram

To create a visual architecture diagram, you can use tools like:

1. **Draw.io** (https://app.diagrams.net/)
2. **Lucidchart** (https://www.lucidchart.com/)
3. **PlantUML** (https://plantuml.com/)
4. **Mermaid** (https://mermaid.js.org/)

## ASCII Architecture Diagram

```
┌─────────────────────────────────────────────────────────────────────┐
│                         Developer Workflow                          │
│                                                                     │
│  Developer → Git Commit → Pull Request → Code Review → Merge       │
└────────────────────────────┬────────────────────────────────────────┘
                             │
                             │ Webhook Trigger
                             ▼
┌─────────────────────────────────────────────────────────────────────┐
│                    Jenkins CI/CD Server (EC2)                        │
│  ┌──────────────────────────────────────────────────────────────┐  │
│  │                    Pipeline Stages                            │  │
│  │                                                               │  │
│  │  1. Checkout  →  2. Test  →  3. Build  →  4. Scan           │  │
│  │       ↓              ↓           ↓            ↓              │  │
│  │  5. Push ECR  →  6. Deploy Staging  →  7. Approval          │  │
│  │       ↓              ↓                      ↓                │  │
│  │  8. Deploy Prod  →  9. Verify  →  10. Rollback (if needed)  │  │
│  └──────────────────────────────────────────────────────────────┘  │
└─────────────────────────────────────────────────────────────────────┘
                    │                              │
                    │                              │
                    ▼                              ▼
┌──────────────────────────┐      ┌──────────────────────────────────┐
│     AWS ECR              │      │         AWS EKS Cluster          │
│  ┌────────────────────┐  │      │  ┌────────────────────────────┐ │
│  │ Docker Images      │  │      │  │      Control Plane         │ │
│  │ - Tagged versions  │  │      │  │  (Managed by AWS)          │ │
│  │ - Latest           │  │      │  └────────────────────────────┘ │
│  │ - Scanned          │  │      │              │                  │
│  └────────────────────┘  │      │              ▼                  │
└──────────────────────────┘      │  ┌────────────────────────────┐ │
                                  │  │      Worker Nodes          │ │
                                  │  │  ┌──────────┐ ┌──────────┐ │ │
                                  │  │  │ Staging  │ │   Prod   │ │ │
                                  │  │  │Namespace │ │Namespace │ │ │
                                  │  │  │          │ │          │ │ │
                                  │  │  │ 2 Pods   │ │ 3 Pods   │ │ │
                                  │  │  └──────────┘ └──────────┘ │ │
                                  │  └────────────────────────────┘ │
                                  └──────────────────────────────────┘
                                                │
                                                ▼
                                  ┌──────────────────────────────────┐
                                  │    AWS Load Balancer (ALB/NLB)   │
                                  │    - Public endpoint             │
                                  │    - SSL termination             │
                                  │    - Health checks               │
                                  └──────────────────────────────────┘
                                                │
                                                ▼
                                  ┌──────────────────────────────────┐
                                  │         End Users                │
                                  │    (Web/Mobile/API Clients)      │
                                  └──────────────────────────────────┘
```

## Component Details

### GitHub
- Source code repository
- Version control
- Pull request workflow
- Webhook integration

### Jenkins (EC2)
- t3.medium instance
- Ubuntu 22.04
- Docker, kubectl, helm, AWS CLI
- Pipeline orchestration

### AWS ECR
- Private Docker registry
- Image scanning enabled
- Lifecycle policies
- Encryption at rest

### AWS EKS
- Kubernetes 1.28
- 2x t3.medium nodes
- Managed control plane
- Auto-scaling enabled

### Namespaces
- staging: Pre-production testing
- prod: Production workloads

### Load Balancer
- AWS ALB/NLB
- SSL/TLS termination
- Health checks
- Traffic distribution

## Data Flow

1. Developer pushes code to GitHub
2. GitHub webhook triggers Jenkins
3. Jenkins runs CI pipeline:
   - Checkout code
   - Run tests
   - Build Docker image
   - Scan for vulnerabilities
4. Jenkins pushes image to ECR
5. Jenkins deploys to staging namespace
6. Manual approval required
7. Jenkins deploys to production namespace
8. Load Balancer routes traffic to pods
9. Users access application

## Security Layers

1. **Network**: VPC, Security Groups, Network Policies
2. **Authentication**: IAM, RBAC, Service Accounts
3. **Encryption**: TLS, KMS, Secrets Manager
4. **Scanning**: Trivy, ECR scanning
5. **Monitoring**: CloudWatch, Audit logs

## High Availability

- Multiple availability zones
- Multiple pod replicas
- Load balancer health checks
- Automatic pod restart
- Rolling updates
- Automatic rollback

Save this as 'architecture-diagram.png' after creating the visual diagram.
